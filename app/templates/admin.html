{% extends 'layouts/base.html' %}
{% block title %}Admin â€¢ BZCC GameWatch{% endblock %}
{% block content %}
  <div class="grid gap-4">
    <div class="card bg-base-200 border border-base-300">
      <div class="card-body">
        <h3 class="card-title">Health</h3>
        <button class="btn btn-sm" id="btnHealth">Fetch</button>
        <pre id="outHealth" class="text-xs">(click Fetch)</pre>
      </div>
    </div>
    <div class="card bg-base-200 border border-base-300">
      <div class="card-body">
        <h3 class="card-title">RakNet Sample</h3>
        <button class="btn btn-sm" id="btnRaknet">Fetch</button>
        <pre id="outRaknet" class="text-xs">(click Fetch)</pre>
      </div>
    </div>
    <div class="card bg-base-200 border border-base-300">
      <div class="card-body">
        <h3 class="card-title">Sessions by map (last 24h)</h3>
        <button class="btn btn-sm" id="btnMaps">Refresh</button>
        <pre id="mapsOut" class="text-xs">(click Refresh)</pre>
      </div>
    </div>
    <div class="card bg-base-200 border border-base-300">
      <div class="card-body">
        <h3 class="card-title">Sessions by mod (last 24h)</h3>
        <button class="btn btn-sm" id="btnMods">Refresh</button>
        <pre id="modsOut" class="text-xs">(click Refresh)</pre>
      </div>
    </div>
  </div>
{% endblock %}
{% block scripts %}
<script>
  async function getJson(url){ const r = await fetch(url); return await r.json(); }
  document.getElementById('btnHealth').onclick = async()=>{
    const j = await getJson('/admin/tools/health');
    document.getElementById('outHealth').textContent = JSON.stringify(j, null, 2);
  };
  document.getElementById('btnRaknet').onclick = async()=>{
    const j = await getJson('/admin/tools/raknet/sample');
    document.getElementById('outRaknet').textContent = JSON.stringify(j, null, 2);
  };
  document.getElementById('btnMaps').onclick = async()=>{
    const j = await getJson('/api/v1/history/maps?hours=24');
    document.getElementById('mapsOut').textContent = JSON.stringify(j, null, 2);
  };
  document.getElementById('btnMods').onclick = async()=>{
    const j = await getJson('/api/v1/history/mods?hours=24');
    document.getElementById('modsOut').textContent = JSON.stringify(j, null, 2);
  };
</script>
{% endblock %}


